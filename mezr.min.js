/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.mezr=e()}(this,function(t){"use strict";function e(t,e){return e=e&&Y[e]||4,y("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&Y[e]||4,y("height",t,e>1,e>2,e>3,e>4)}function n(t,e){if(t===B)return{left:0,top:0};var o=j.pageXOffset||0,n=j.pageYOffset||0;if(t.self===j.self)return{left:o,top:o};e=e&&Y[e]||4;var r=N||t.getBoundingClientRect(),i=r.left+o,f=r.top+n;if(5===e){var l=d(g(t,"margin-left")),a=d(g(t,"margin-top"));i-=l>0?l:0,f-=a>0?a:0}return e<4&&(i+=d(g(t,"border-left-width")),f+=d(g(t,"border-top-width"))),1===e&&(i+=d(g(t,"padding-left")),f+=d(g(t,"padding-top"))),{left:i,top:f}}function r(t,r){r=r||"border",N=t.getBoundingClientRect();var i=n(t,r);return i.width=e(t,r),i.height=o(t,r),i.bottom=i.top+i.height,i.right=i.left+i.width,N=null,i}function i(t){var e="fixed"===g(t,"position");if(e&&!z.telcs)return global;var o=t===R||t===global?B:t.parentElement||null;if(e){for(;o&&o!==B&&!s(o);)o=o.parentElement||B;return o===B?global:o}for(;o&&o!==B&&"static"===g(o,"position")&&!s(o);)o=o.parentElement||B;return o}function f(t,e){var o=x(t),n=x(e);return l(o,n)?-1:v(o,n)}function l(t,e){var o=x(t),n=x(e),r=b(o,n),i=T(o.width+X(r.left,0)+X(r.right,0),0),f=T(o.height+X(r.top,0)+X(r.bottom,0),0),l=i>0&&f>0;return l?{width:i,height:f,left:o.left+P(X(r.left,0)),top:o.top+P(X(r.top,0))}:null}function a(t,n){t=[].concat(t),n=O(t,n);var r={},i=x(n.of),f=C(t[0],t[1]),l=n.offsetX,a=n.offsetY;if(f.width=e(t[0],t[1]),f.height=o(t[0],t[1]),l="string"==typeof l&&l.indexOf("%")>-1?d(l)/100*f.width:d(l),a="string"==typeof a&&a.indexOf("%")>-1?d(a)/100*f.height:d(a),r.left=M(n.my[0]+n.at[0],i.width,i.left,f.width,f.left,l),r.top=M(n.my[1]+n.at[1],i.height,i.top,f.height,f.top,a),n.within&&n.collision){f.left+=r.left,f.top+=r.top;var p=b(f,n.within);r.left+=E(n.collision,p),r.top+=E(n.collision,p,1)}return r}function p(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function u(){for(var e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],o=0;o<e.length;o++)if(R.style[e[o]]!==t){var n=e[o],r=n.toLowerCase().split("transform")[0];return{prefix:r,propName:n,styleName:r?"-"+r+"-transform":n}}return null}function h(){if(!z.transform)return!1;var t,e,o=B.createElement("div"),n=B.createElement("div");return m(o,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),m(n,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),o.appendChild(n),A.appendChild(o),t=n.getBoundingClientRect().left,o.style[z.transform.propName]="translateZ(0)",e=n.getBoundingClientRect().left,A.removeChild(o),e!==t}function s(t){var e=g(t,z.transform.styleName),o=g(t,"display");return"none"!==e&&"inline"!==o&&"none"!==o}function d(t){return parseFloat(t)||0}function c(t){for(var e,o,n={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(o=t[r][e],n[e]=p(o)?c([o]):Array.isArray(o)?o.slice():o);return n}function g(t,e){return j.getComputedStyle(t,null).getPropertyValue(e)}function m(t,e){for(var o in e)t.style[o]=e[o]}function b(t,e){return t=x(t),e=x(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function w(t,e,o,n){return Math.sqrt(Math.pow(o-t,2)+Math.pow(n-e,2))}function v(t,e){var o=0,n=t.left,r=n+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return o=(l>r||a<n)&&(p>f||u<i)?l>r?u<i?w(r,i,l,u):w(r,f,l,p):u<i?w(n,i,a,u):w(n,f,a,p):u<i?i-u:l>r?l-r:p>f?p-f:n-a}function y(e,o,n,r,i,f){var l,a="height"===e,p=a?"Height":"Width",u="inner"+p,h="client"+p,s="scroll"+p;if(o.self===j.self)l=r?j[u]:R[h];else if(o===B)if(r){var c=j[u]-R[h];l=T(R[s]+c,A[s]+c,j[u])}else l=T(R[s],A[s],R[h]);else{var m,b,w=a?"top":"left",v=a?"bottom":"right";if(l=(N||o.getBoundingClientRect())[e],r||(o===R?l-=j[u]-R[h]:(m=d(g(o,"border-"+w+"-width")),b=d(g(o,"border-"+v+"-width")),l-=Math.round(l)-o[h]-m-b)),n||(l-=d(g(o,"padding-"+w)),l-=d(g(o,"padding-"+v))),i||(l-=m!==t?m:d(g(o,"border-"+w+"-width")),l-=b!==t?b:d(g(o,"border-"+v+"-width"))),f){var y=d(g(o,"margin-"+w)),x=d(g(o,"margin-"+v));l+=y>0?y:0,l+=x>0?x:0}}return l}function x(t){return t?p(t)?t:(t=[].concat(t),r(t[0],t[1])):null}function C(t,e){e=e||"border";var o,r=g(t,"position");if("static"===r)o=n(t,e);else if("relative"===r){o=n(t,e);var f=g(t,"left"),l=g(t,"right"),a=g(t,"top"),p=g(t,"bottom");"auto"===f&&"auto"===l||(o.left-="auto"===f?-d(l):d(f)),"auto"===a&&"auto"===p||(o.top-="auto"===a?-d(p):d(a))}else{o=n(i(t)||B,"padding"),e=Y[e];var u=d(g(t,"margin-left")),h=d(g(t,"margin-top"));5===e&&(o.left-=P(X(u,0)),o.top-=P(X(h,0))),e<5&&(o.left+=u,o.top+=h),e<4&&(o.left+=d(g(t,"border-left-width")),o.top+=d(g(t,"border-top-width"))),1===e&&(o.left+=d(g(t,"padding-left")),o.top+=d(g(t,"padding-top")))}return o}function O(t,e){e=c(e?[z.placeDefaultOptions,e]:[defaults]);for(var o,n,r=0;r<7;r++)o=k[r],n=e[o],"function"==typeof n&&(n=e[o]=n()),r<2&&(n="string"==typeof n?n.split(" "):n,n[0]=n[0].charAt(0),n[1]=n[1].charAt(0),e[o]=n);return"string"==typeof e.collision&&(n=e.collision.split(" "),n[1]=n[1]||n[0],e.collision={left:n[0],right:n[0],top:n[1],bottom:n[1]}),e}function M(t,e,o,n,r,i){var f=o+i-r;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-n/2:"cr"===t||"cb"===t?f+e-n/2:"rl"===t||"bt"===t?f-n:"rc"===t||"bc"===t?f-n+e/2:"rr"===t||"bb"===t?f-n+e:f+e/2-n/2}function E(t,e,o){var n=0,r="push",i="forcePush",f=o?"top":"left",l=o?"bottom":"right",a=t[f],p=t[l],u=e[f],h=e[l],s=u+h;return a!==r&&a!==i||p!==r&&p!==i||!(u<0||h<0)?(a===i||a===r)&&u<0?n-=u:(p===i||p===r)&&h<0&&(n+=h):(u<h&&(n-=s<0?u+P(s/2):u),h<u&&(n+=s<0?h+P(s/2):h),u+=n,h-=n,a===i&&p!=i&&u<0&&(n-=u),p===i&&a!=i&&h<0&&(n+=h)),n}var j=window,B=j.document,R=B.documentElement,A=B.body;if(!A)throw Error("Mezr needs access to body element.");var N,P=Math.abs,T=Math.max,X=Math.min,Y={content:1,padding:2,scroll:3,border:4,margin:5},k=["my","at","of","within","collision","offsetX","offsetY"],z={};return z.placeDefaultOptions={my:"left top",at:"left top",of:j,offsetX:0,offsetY:0,within:null,collision:{left:"push",right:"push",top:"push",bottom:"push"}},z.transform=u(),z.telcs=h(),{width:e,height:o,offset:n,rect:r,offsetParent:i,distance:f,intersection:l,place:a,_settings:z}});