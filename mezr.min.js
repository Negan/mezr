/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function n(t,e){return e=e&&X[e]||4,x("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&X[e]||4,x("height",t,e>1,e>2,e>3,e>4)}function r(e,n){var o={left:0,top:0};if(e===j)return o;if(o.left=t.pageXOffset||0,o.top=t.pageYOffset||0,e.self===t.self)return o;var r=A||e.getBoundingClientRect();if(o.left+=r.left,o.top+=r.top,n=n&&X[n]||4,5===n){var i=b(e,"margin-left"),l=b(e,"margin-top");o.left-=i>0?i:0,o.top-=l>0?l:0}return n<4&&(o.left+=b(e,"border-left-width"),o.top+=b(e,"border-top-width")),1===n&&(o.left+=b(e,"padding-left"),o.top+=b(e,"padding-top")),o}function i(e,i){var l=e!==j&&e.self!==t.self;i=i||"border",l&&(A=e.getBoundingClientRect());var f=r(e,i);return f.width=n(e,i),f.height=o(e,i),f.bottom=f.top+f.height,f.right=f.left+f.width,l&&(A=null),f}function l(e){if(e===j)return null;if(e===t)return j;var n="fixed"===m(e,"position");if(n&&!Y.hasTELCS)return t;var o=e===B?j:e.parentElement||null;if(n){for(;o&&o!==j&&!d(o);)o=o.parentElement||j;return o===j?t:o}for(;o&&o!==j&&"static"===m(o,"position")&&!d(o);)o=o.parentElement||j;return o}function f(t,e){var n=O(t),o=O(e);return a(n,o)?-1:C(n,o)}function a(t,e){var n=O(t),o=O(e),r=w(n,o),i=P(n.width+S(r.left,0)+S(r.right,0),0),l=P(n.height+S(r.top,0)+S(r.bottom,0),0),f=i>0&&l>0;return f?{width:i,height:l,left:n.left+N(S(r.left,0)),top:n.top+N(S(r.top,0))}:null}function p(t){t=E(t);var e={},r=[].concat(t.element),i=J(r[0],r[1]),l=O(t.target),f=t.offsetX,a=t.offsetY;if(i.width=n(r[0],r[1]),i.height=o(r[0],r[1]),f="string"==typeof f&&f.indexOf("%")>-1?c(f)/100*i.width:c(f),a="string"==typeof a&&a.indexOf("%")>-1?c(a)/100*i.height:c(a),e.left=M(t.elementJoint[0]+t.targetJoint[0],l.width,l.left,i.width,i.left,f),e.top=M(t.elementJoint[1]+t.targetJoint[1],l.height,l.top,i.height,i.top,a),t.container&&t.onCollision){i.left+=e.left,i.top+=e.top;var p=w(i,t.container);e.left+=T(t.onCollision,p),e.top+=T(t.onCollision,p,1)}return e}function u(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function s(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++)if(B.style[t[n]]!==e){var o=t[n],r=o.toLowerCase().split("transform")[0];return{prefix:r,propName:o,styleName:r?"-"+r+"-transform":o}}return null}function h(){if(!Y.transform)return!1;var t,e,n=j.createElement("div"),o=j.createElement("div");return v(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),v(o,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(o),R.appendChild(n),t=o.getBoundingClientRect().left,n.style[Y.transform.propName]="translateZ(0)",e=o.getBoundingClientRect().left,R.removeChild(n),e!==t}function d(t){var e=m(t,Y.transform.styleName),n=m(t,"display");return"none"!==e&&"inline"!==n&&"none"!==n}function c(t){return parseFloat(t)||0}function g(t){for(var e,n,o={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(n=t[r][e],o[e]=u(n)?g([n]):Array.isArray(n)?n.slice():n);return o}function m(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}function b(t,e){return c(m(t,e))}function v(t,e){for(var n in e)t.style[n]=e[n]}function w(t,e){return t=O(t),e=O(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function y(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))}function C(t,e){var n=0,o=t.left,r=o+e.width,i=t.top,l=i+e.height,f=e.left,a=f+e.width,p=e.top,u=p+e.height;return n=(f>r||a<o)&&(p>l||u<i)?f>r?u<i?y(r,i,f,u):y(r,l,f,p):u<i?y(o,i,a,u):y(o,l,a,p):u<i?i-u:f>r?f-r:p>l?p-l:o-a}function x(n,o,r,i,l,f){var a,p="height"===n,u=p?"Height":"Width",s="inner"+u,h="client"+u,d="scroll"+u;if(o.self===t.self)a=i?t[s]:B[h];else if(o===j)if(i){var c=t[s]-B[h];a=P(B[d]+c,R[d]+c,t[s])}else a=P(B[d],R[d],B[h]);else{var g,m,v=p?"top":"left",w=p?"bottom":"right";if(a=(A||o.getBoundingClientRect())[n],i||(o===B?a-=t[s]-B[h]:(g=b(o,"border-"+v+"-width"),m=b(o,"border-"+w+"-width"),a-=Math.round(a)-o[h]-g-m)),r||(a-=b(o,"padding-"+v),a-=b(o,"padding-"+w)),l||(a-=g!==e?g:b(o,"border-"+v+"-width"),a-=m!==e?m:b(o,"border-"+w+"-width")),f){var y=b(o,"margin-"+v),C=b(o,"margin-"+w);a+=y>0?y:0,a+=C>0?C:0}}return a}function O(t){return t?u(t)?t:(t=[].concat(t),i(t[0],t[1])):null}function J(t,e){e=e||"border";var n=m(t,"position"),o="static"===n||"relative"===n?r(t,e):r(l(t)||j,"padding");if("static"===n)return o;if("relative"===n){var i=m(t,"left"),f=m(t,"right"),a=m(t,"top"),p=m(t,"bottom");return"auto"===i&&"auto"===f||(o.left-="auto"===i?-c(f):c(i)),"auto"===a&&"auto"===p||(o.top-="auto"===a?-c(p):c(a)),o}e=X[e];var u=b(t,"margin-left"),s=b(t,"margin-top");return 5===e&&(o.left-=N(S(u,0)),o.top-=N(S(s,0))),e<5&&(o.left+=u,o.top+=s),e<4&&(o.left+=b(t,"border-left-width"),o.top+=b(t,"border-top-width")),1===e&&(o.left+=b(t,"padding-left"),o.top+=b(t,"padding-top")),o}function E(t){t=g(t?[Y.placeDefaultOptions,t]:[Y.placeDefaultOptions]);for(var e,n,o=["element","target","elementJoint","targetJoint","offsetX","offsetY","container","onCollision"],r=0;r<7;r++)e=o[r],n=t[e],"function"==typeof n&&(n=t[e]=n()),"elementJoint"!==e&&"targetJoint"!==e||(n="string"==typeof n?n.split(" "):n,n[0]=n[0].charAt(0),n[1]=n[1].charAt(0),t[e]=n);return"string"==typeof t.onCollision&&(n=t.onCollision.split(" "),n[1]=n[1]||n[0],t.onCollision={left:n[0],right:n[0],top:n[1],bottom:n[1]}),t}function M(t,e,n,o,r,i){var l=n+i-r;return"ll"===t||"tt"===t?l:"lc"===t||"tc"===t?l+e/2:"lr"===t||"tb"===t?l+e:"cl"===t||"ct"===t?l-o/2:"cr"===t||"cb"===t?l+e-o/2:"rl"===t||"bt"===t?l-o:"rc"===t||"bc"===t?l-o+e/2:"rr"===t||"bb"===t?l-o+e:l+e/2-o/2}function T(t,e,n){var o=0,r="push",i="forcePush",l=n?"top":"left",f=n?"bottom":"right",a=t[l],p=t[f],u=e[l],s=e[f],h=u+s;return a!==r&&a!==i||p!==r&&p!==i||!(u<0||s<0)?(a===i||a===r)&&u<0?o-=u:(p===i||p===r)&&s<0&&(o+=s):(u<s&&(o-=h<0?u+N(h/2):u),s<u&&(o+=h<0?s+N(h/2):s),u+=o,s-=o,a===i&&p!=i&&u<0&&(o-=u),p===i&&a!=i&&s<0&&(o+=s)),o}var t=t.document&&t.self===t.document.defaultView?t:window,j=t.document,B=j.documentElement,R=j.body;if(!R)throw Error("Mezr needs access to body element.");var A,N=Math.abs,P=Math.max,S=Math.min,X={content:1,padding:2,scroll:3,border:4,margin:5},Y={};return Y.placeDefaultOptions={element:null,target:null,elementJoint:"left top",targetJoint:"left top",offsetX:0,offsetY:0,container:null,onCollision:{left:"push",right:"push",top:"push",bottom:"push"}},Y.transform=s(),Y.hasTELCS=h(),{width:n,height:o,offset:r,rect:i,offsetParent:l,distance:f,intersection:a,place:p,_settings:Y}});