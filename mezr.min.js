/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function r(t,e){return e=e&&Y[e]||4,C("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&Y[e]||4,C("height",t,e>1,e>2,e>3,e>4)}function n(e,r){var o={left:0,top:0};if(e===B)return o;if(o.left=t.pageXOffset||0,o.top=t.pageYOffset||0,e.self===t.self)return o;var n=N||e.getBoundingClientRect();if(o.left+=n.left,o.top+=n.top,r=r&&Y[r]||4,5===r){var i=b(e,"margin-left"),f=b(e,"margin-top");o.left-=i>0?i:0,o.top-=f>0?f:0}return r<4&&(o.left+=b(e,"border-left-width"),o.top+=b(e,"border-top-width")),1===r&&(o.left+=b(e,"padding-left"),o.top+=b(e,"padding-top")),o}function i(e,i){var f=e!==B&&e.self!==t.self;i=i||"border",f&&(N=e.getBoundingClientRect());var l=n(e,i);return l.width=r(e,i),l.height=o(e,i),l.bottom=l.top+l.height,l.right=l.left+l.width,f&&(N=null),l}function f(e){if(e===B)return null;if(e===t)return B;var r="fixed"===m(e,"position");if(r&&!z.hasTELCS)return t;var o=e===R?B:e.parentElement||null;if(r){for(;o&&o!==B&&!d(o);)o=o.parentElement||B;return o===B?t:o}for(;o&&o!==B&&"static"===m(o,"position")&&!d(o);)o=o.parentElement||B;return o}function l(t,e){var r=O(t),o=O(e);return a(r,o)?-1:x(r,o)}function a(t,e){var r=O(t),o=O(e),n=w(r,o),i=S(r.width+X(n.left,0)+X(n.right,0),0),f=S(r.height+X(n.top,0)+X(n.bottom,0),0),l=i>0&&f>0;return l?{width:i,height:f,left:r.left+P(X(n.left,0)),top:r.top+P(X(n.top,0))}:null}function p(t,e){t=[].concat(t),e=M(t,e);var n={},i=O(e.of),f=E(t[0],t[1]),l=e.offsetX,a=e.offsetY;if(f.width=r(t[0],t[1]),f.height=o(t[0],t[1]),l="string"==typeof l&&l.indexOf("%")>-1?c(l)/100*f.width:c(l),a="string"==typeof a&&a.indexOf("%")>-1?c(a)/100*f.height:c(a),n.left=T(e.my[0]+e.at[0],i.width,i.left,f.width,f.left,l),n.top=T(e.my[1]+e.at[1],i.height,i.top,f.height,f.top,a),e.within&&e.collision){f.left+=n.left,f.top+=n.top;var p=w(f,e.within);n.left+=j(e.collision,p),n.top+=j(e.collision,p,1)}return n}function u(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function h(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],r=0;r<t.length;r++)if(R.style[t[r]]!==e){var o=t[r],n=o.toLowerCase().split("transform")[0];return{prefix:n,propName:o,styleName:n?"-"+n+"-transform":o}}return null}function s(){if(!z.transform)return!1;var t,e,r=B.createElement("div"),o=B.createElement("div");return v(r,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),v(o,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),r.appendChild(o),A.appendChild(r),t=o.getBoundingClientRect().left,r.style[z.transform.propName]="translateZ(0)",e=o.getBoundingClientRect().left,A.removeChild(r),e!==t}function d(t){var e=m(t,z.transform.styleName),r=m(t,"display");return"none"!==e&&"inline"!==r&&"none"!==r}function c(t){return parseFloat(t)||0}function g(t){for(var e,r,o={},n=0,i=t.length;n<i;n++)for(e in t[n])t[n].hasOwnProperty(e)&&(r=t[n][e],o[e]=u(r)?g([r]):Array.isArray(r)?r.slice():r);return o}function m(e,r){return t.getComputedStyle(e,null).getPropertyValue(r)}function b(t,e){return c(m(t,e))}function v(t,e){for(var r in e)t.style[r]=e[r]}function w(t,e){return t=O(t),e=O(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function y(t,e,r,o){return Math.sqrt(Math.pow(r-t,2)+Math.pow(o-e,2))}function x(t,e){var r=0,o=t.left,n=o+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return r=(l>n||a<o)&&(p>f||u<i)?l>n?u<i?y(n,i,l,u):y(n,f,l,p):u<i?y(o,i,a,u):y(o,f,a,p):u<i?i-u:l>n?l-n:p>f?p-f:o-a}function C(r,o,n,i,f,l){var a,p="height"===r,u=p?"Height":"Width",h="inner"+u,s="client"+u,d="scroll"+u;if(o.self===t.self)a=i?t[h]:R[s];else if(o===B)if(i){var c=t[h]-R[s];a=S(R[d]+c,A[d]+c,t[h])}else a=S(R[d],A[d],R[s]);else{var g,m,v=p?"top":"left",w=p?"bottom":"right";if(a=(N||o.getBoundingClientRect())[r],i||(o===R?a-=t[h]-R[s]:(g=b(o,"border-"+v+"-width"),m=b(o,"border-"+w+"-width"),a-=Math.round(a)-o[s]-g-m)),n||(a-=b(o,"padding-"+v),a-=b(o,"padding-"+w)),f||(a-=g!==e?g:b(o,"border-"+v+"-width"),a-=m!==e?m:b(o,"border-"+w+"-width")),l){var y=b(o,"margin-"+v),x=b(o,"margin-"+w);a+=y>0?y:0,a+=x>0?x:0}}return a}function O(t){return t?u(t)?t:(t=[].concat(t),i(t[0],t[1])):null}function E(t,e){e=e||"border";var r=m(t,"position"),o="static"===r||"relative"===r?n(t,e):n(f(t)||B,"padding");if("static"===r)return o;if("relative"===r){var i=m(t,"left"),l=m(t,"right"),a=m(t,"top"),p=m(t,"bottom");return"auto"===i&&"auto"===l||(o.left-="auto"===i?-c(l):c(i)),"auto"===a&&"auto"===p||(o.top-="auto"===a?-c(p):c(a)),o}e=Y[e];var u=b(t,"margin-left"),h=b(t,"margin-top");return 5===e&&(o.left-=P(X(u,0)),o.top-=P(X(h,0))),e<5&&(o.left+=u,o.top+=h),e<4&&(o.left+=b(t,"border-left-width"),o.top+=b(t,"border-top-width")),1===e&&(o.left+=b(t,"padding-left"),o.top+=b(t,"padding-top")),o}function M(t,e){e=g(e?[z.placeDefaultOptions,e]:[defaults]);for(var r,o,n=0;n<7;n++)r=k[n],o=e[r],"function"==typeof o&&(o=e[r]=o()),n<2&&(o="string"==typeof o?o.split(" "):o,o[0]=o[0].charAt(0),o[1]=o[1].charAt(0),e[r]=o);return"string"==typeof e.collision&&(o=e.collision.split(" "),o[1]=o[1]||o[0],e.collision={left:o[0],right:o[0],top:o[1],bottom:o[1]}),e}function T(t,e,r,o,n,i){var f=r+i-n;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-o/2:"cr"===t||"cb"===t?f+e-o/2:"rl"===t||"bt"===t?f-o:"rc"===t||"bc"===t?f-o+e/2:"rr"===t||"bb"===t?f-o+e:f+e/2-o/2}function j(t,e,r){var o=0,n="push",i="forcePush",f=r?"top":"left",l=r?"bottom":"right",a=t[f],p=t[l],u=e[f],h=e[l],s=u+h;return a!==n&&a!==i||p!==n&&p!==i||!(u<0||h<0)?(a===i||a===n)&&u<0?o-=u:(p===i||p===n)&&h<0&&(o+=h):(u<h&&(o-=s<0?u+P(s/2):u),h<u&&(o+=s<0?h+P(s/2):h),u+=o,h-=o,a===i&&p!=i&&u<0&&(o-=u),p===i&&a!=i&&h<0&&(o+=h)),o}var t=t.document&&t.self===t.document.defaultView?t:window,B=t.document,R=B.documentElement,A=B.body;if(!A)throw Error("Mezr needs access to body element.");var N,P=Math.abs,S=Math.max,X=Math.min,Y={content:1,padding:2,scroll:3,border:4,margin:5},k=["my","at","of","within","collision","offsetX","offsetY"],z={};return z.placeDefaultOptions={my:"left top",at:"left top",of:t,offsetX:0,offsetY:0,within:null,collision:{left:"push",right:"push",top:"push",bottom:"push"}},z.transform=h(),z.hasTELCS=s(),{width:r,height:o,offset:n,rect:i,offsetParent:f,distance:l,intersection:a,place:p,_settings:z}});