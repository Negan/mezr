/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function n(t,e){return e=e&&F[e]||4,O("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&F[e]||4,O("height",t,e>1,e>2,e>3,e>4)}function r(e,n){var o={left:0,top:0};if(e===R)return o;if(o.left=t.pageXOffset||0,o.top=t.pageYOffset||0,e.self===t.self)return o;var r=X||e.getBoundingClientRect();if(o.left+=r.left,o.top+=r.top,n=n&&F[n]||4,5===n){var i=b(e,"margin-left"),f=b(e,"margin-top");o.left-=i>0?i:0,o.top-=f>0?f:0}return n<4&&(o.left+=b(e,"border-left-width"),o.top+=b(e,"border-top-width")),1===n&&(o.left+=b(e,"padding-left"),o.top+=b(e,"padding-top")),o}function i(e,i){var f=e!==R&&e.self!==t.self;i=i||"border",f&&(X=e.getBoundingClientRect());var l=r(e,i);return l.width=n(e,i),l.height=o(e,i),l.bottom=l.top+l.height,l.right=l.left+l.width,f&&(X=null),l}function f(e,n){if(e===R)return null;if(e===t)return R;var o=n||m(e,"position");if("relative"===o)return e;if("fixed"!==o&&"absolute"!==o)return null;if("fixed"===o&&L.transformLeaksFixed)return t;var r=e===N?R:e.parentElement||null;if("fixed"===o){for(;r&&r!==R&&!c(r);)r=r.parentElement||R;return r===R?t:r}for(;r&&r!==R&&"static"===m(r,"position")&&!c(r);)r=r.parentElement||R;return r}function l(t,e){var n=M(t),o=M(e);return y(n,o)?-1:C(n,o)}function a(){var t=y(arguments[0],arguments[1]);if(arguments.length>2)for(var e=2;e<arguments.length&&(t=y(t,arguments[e]),t);++e);return t}function p(t){var e={},r=E(t),i=[].concat(r.element),f=j(i[0],i[1]),l=M(r.target),a=r.offsetX,p=r.offsetY;if(f.width=n(i[0],i[1]),f.height=o(i[0],i[1]),a="string"==typeof a&&a.indexOf("%")>-1?s(a)/100*f.width:s(a),p="string"==typeof p&&p.indexOf("%")>-1?s(p)/100*f.height:s(p),e.left=k(r.position[0]+r.position[2],l.width,l.left,f.width,f.left,a),e.top=k(r.position[1]+r.position[3],l.height,l.top,f.height,f.top,p),r.contain){f.left+=e.left,f.top+=e.top;var u=w(f,r.contain.within);e.left+=B(r.contain.onCollision,u),e.top+=B(r.contain.onCollision,u,1)}return e}function u(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function d(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++)if(N.style[t[n]]!==e){var o=t[n],r=o.toLowerCase().split("transform")[0];return{prefix:r,propName:o,styleName:r?"-"+r+"-transform":o}}return null}function h(){if(!L.transform)return!0;var t,e,n=R.createElement("div"),o=R.createElement("div");return v(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),v(o,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(o),T.appendChild(n),t=o.getBoundingClientRect().left,n.style[L.transform.propName]="translateX(0)",e=o.getBoundingClientRect().left,T.removeChild(n),e===t}function c(t){var e=m(t,L.transform.styleName),n=m(t,"display");return"none"!==e&&"inline"!==n&&"none"!==n}function s(t){return parseFloat(t)||0}function g(t){for(var e,n,o={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(n=t[r][e],o[e]=u(n)?g([n]):Array.isArray(n)?n.slice():n);return o}function m(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}function b(t,e){return s(m(t,e))}function v(t,e){for(var n in e)t.style[n]=e[n]}function w(t,e){return t=M(t),e=M(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function y(t,e){var n={},o=M(t),r=M(e),i=w(o,r),f=A(o.width+D(i.left,0)+D(i.right,0),0),l=A(o.height+D(i.top,0)+D(i.bottom,0),0),a=f>0&&l>0;return a&&(n.width=f,n.height=l,n.left=o.left+z(D(i.left,0)),n.top=o.top+z(D(i.top,0)),n.right=n.left+n.width,n.bottom=n.top+n.height),a?n:null}function x(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))}function C(t,e){var n=0,o=t.left,r=o+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return n=(l>r||a<o)&&(p>f||u<i)?l>r?u<i?x(r,i,l,u):x(r,f,l,p):u<i?x(o,i,a,u):x(o,f,a,p):u<i?i-u:l>r?l-r:p>f?p-f:o-a}function O(n,o,r,i,f,l){var a,p,u,d,h,c,s,g,m="height"===n,v=m?"Height":"Width",w="inner"+v,y="client"+v,x="scroll"+v;return o.self===t.self?a=i?t[w]:N[y]:o===R?i?(g=t[w]-N[y],a=A(N[x]+g,T[x]+g,t[w])):a=A(N[x],T[x],N[y]):(p=m?"top":"left",u=m?"bottom":"right",a=(X||o.getBoundingClientRect())[n],i||(o===N?g=t[w]-N[y]:(d=b(o,"border-"+p+"-width"),h=b(o,"border-"+u+"-width"),g=Math.round(a)-(o[y]+d+h)),a-=g>0?g:0),r||(a-=b(o,"padding-"+p),a-=b(o,"padding-"+u)),f||(a-=d!==e?d:b(o,"border-"+p+"-width"),a-=h!==e?h:b(o,"border-"+u+"-width")),l&&(c=b(o,"margin-"+p),s=b(o,"margin-"+u),a+=c>0?c:0,a+=s>0?s:0)),a}function M(t){return t?u(t)?t:(t=[].concat(t),i(t[0],t[1])):null}function j(e,n){if(n=n||"border",e===t||e===R)return r(e,n);var o=m(e,"position"),i="static"===o||"relative"===o?r(e,n):r(f(e)||R,"padding");if("static"===o)return i;if("relative"===o){var l=m(e,"left"),a=m(e,"right"),p=m(e,"top"),u=m(e,"bottom");return"auto"===l&&"auto"===a||(i.left-="auto"===l?-s(a):s(l)),"auto"===p&&"auto"===u||(i.top-="auto"===p?-s(u):s(p)),i}n=F[n];var d=b(e,"margin-left"),h=b(e,"margin-top");return 5===n&&(i.left-=z(D(d,0)),i.top-=z(D(h,0))),n<5&&(i.left+=d,i.top+=h),n<4&&(i.left+=b(e,"border-left-width"),i.top+=b(e,"border-top-width")),1===n&&(i.left+=b(e,"padding-left"),i.top+=b(e,"padding-top")),i}function E(t){var e=g(t?[L.placeDefaultOptions,t]:[L.placeDefaultOptions]),n=e.position;e.position=n="string"==typeof n?n.split(" "):n;for(var o=0;o<n.length;o++)n[o]=n[o].charAt(0);var r=e.contain;if(r&&"object"==typeof r&&r.within&&"object"==typeof r.within){var i=r.onCollision,f=typeof i,l="none",a="none",p="none",u="none";"string"===f?l=a=p=u=i:"object"===f&&(l=i.left||i.x||l,a=i.right||i.x||a,p=i.top||i.y||p,u=i.bottom||i.y||u),"none"!==l||"none"!==a||"none"!==p||"none"!==u?e.contain.onCollision={left:l,right:a,top:p,bottom:u}:e.contain=null}else e.contain=null;return e}function k(t,e,n,o,r,i){var f=n+i-r;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-o/2:"cr"===t||"cb"===t?f+e-o/2:"rl"===t||"bt"===t?f-o:"rc"===t||"bc"===t?f-o+e/2:"rr"===t||"bb"===t?f-o+e:f+e/2-o/2}function B(t,e,n){var o=0,r="push",i="forcepush",f=n?"top":"left",l=n?"bottom":"right",a=t[f],p=t[l],u=e[f],d=e[l],h=u+d;return a!==r&&a!==i||p!==r&&p!==i||!(u<0||d<0)?(a===i||a===r)&&u<0?o-=u:(p===i||p===r)&&d<0&&(o+=d):(u<d&&(o-=h<0?u+z(h/2):u),d<u&&(o+=h<0?d+z(h/2):d),u+=o,d-=o,a===i&&p!=i&&u<0&&(o-=u),p===i&&a!=i&&d<0&&(o+=d)),o}var t=t.document&&t.self===t.document.defaultView?t:window,R=t.document,N=R.documentElement,T=R.body;if(!T)throw Error("Mezr needs access to body element.");var X,z=Math.abs,A=Math.max,D=Math.min,F={content:1,padding:2,scroll:3,border:4,margin:5},L={};return L.placeDefaultOptions={element:null,target:null,position:"left top left top",offsetX:0,offsetY:0,contain:null},L.transform=d(),L.transformLeaksFixed=h(),{width:n,height:o,offset:r,rect:i,containingBlock:f,distance:l,intersection:a,place:p,_settings:L}});