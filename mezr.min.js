/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function o(t,e){return e=e&&Y[e]||4,C("width",t,e>1,e>2,e>3,e>4)}function r(t,e){return e=e&&Y[e]||4,C("height",t,e>1,e>2,e>3,e>4)}function n(e,o){var r={left:0,top:0};if(e===B)return r;if(r.left=t.pageXOffset||0,r.top=t.pageYOffset||0,e.self===t.self)return r;var n=N||e.getBoundingClientRect();if(r.left+=n.left,r.top+=n.top,o=o&&Y[o]||4,5===o){var i=b(e,"margin-left"),f=b(e,"margin-top");r.left-=i>0?i:0,r.top-=f>0?f:0}return o<4&&(r.left+=b(e,"border-left-width"),r.top+=b(e,"border-top-width")),1===o&&(r.left+=b(e,"padding-left"),r.top+=b(e,"padding-top")),r}function i(e,i){var f=e!==B&&e.self!==t.self;i=i||"border",f&&(N=e.getBoundingClientRect());var l=n(e,i);return l.width=o(e,i),l.height=r(e,i),l.bottom=l.top+l.height,l.right=l.left+l.width,f&&(N=null),l}function f(e){if(e===B)return null;if(e===t)return B;var o="fixed"===m(e,"position");if(o&&!z.hasTELCS)return t;var r=e===R?B:e.parentElement||null;if(o){for(;r&&r!==B&&!d(r);)r=r.parentElement||B;return r===B?t:r}for(;r&&r!==B&&"static"===m(r,"position")&&!d(r);)r=r.parentElement||B;return r}function l(t,e){var o=O(t),r=O(e);return a(o,r)?-1:x(o,r)}function a(t,e){var o=O(t),r=O(e),n=w(o,r),i=S(o.width+X(n.left,0)+X(n.right,0),0),f=S(o.height+X(n.top,0)+X(n.bottom,0),0),l=i>0&&f>0;return l?{width:i,height:f,left:o.left+P(X(n.left,0)),top:o.top+P(X(n.top,0))}:null}function p(t,e){t=[].concat(t),e=M(t,e);var n={},i=O(e.of),f=E(t[0],t[1]),l=e.offsetX,a=e.offsetY;if(f.width=o(t[0],t[1]),f.height=r(t[0],t[1]),l="string"==typeof l&&l.indexOf("%")>-1?c(l)/100*f.width:c(l),a="string"==typeof a&&a.indexOf("%")>-1?c(a)/100*f.height:c(a),n.left=T(e.my[0]+e.at[0],i.width,i.left,f.width,f.left,l),n.top=T(e.my[1]+e.at[1],i.height,i.top,f.height,f.top,a),e.within&&e.collision){f.left+=n.left,f.top+=n.top;var p=w(f,e.within);n.left+=j(e.collision,p),n.top+=j(e.collision,p,1)}return n}function u(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function h(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],o=0;o<t.length;o++)if(R.style[t[o]]!==e){var r=t[o],n=r.toLowerCase().split("transform")[0];return{prefix:n,propName:r,styleName:n?"-"+n+"-transform":r}}return null}function s(){if(!z.transform)return!1;var t,e,o=B.createElement("div"),r=B.createElement("div");return v(o,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),v(r,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),o.appendChild(r),A.appendChild(o),t=r.getBoundingClientRect().left,o.style[z.transform.propName]="translateZ(0)",e=r.getBoundingClientRect().left,A.removeChild(o),e!==t}function d(t){var e=m(t,z.transform.styleName),o=m(t,"display");return"none"!==e&&"inline"!==o&&"none"!==o}function c(t){return parseFloat(t)||0}function g(t){for(var e,o,r={},n=0,i=t.length;n<i;n++)for(e in t[n])t[n].hasOwnProperty(e)&&(o=t[n][e],r[e]=u(o)?g([o]):Array.isArray(o)?o.slice():o);return r}function m(e,o){return t.getComputedStyle(e,null).getPropertyValue(o)}function b(t,e){return c(m(t,e))}function v(t,e){for(var o in e)t.style[o]=e[o]}function w(t,e){return t=O(t),e=O(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function y(t,e,o,r){return Math.sqrt(Math.pow(o-t,2)+Math.pow(r-e,2))}function x(t,e){var o=0,r=t.left,n=r+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return o=(l>n||a<r)&&(p>f||u<i)?l>n?u<i?y(n,i,l,u):y(n,f,l,p):u<i?y(r,i,a,u):y(r,f,a,p):u<i?i-u:l>n?l-n:p>f?p-f:r-a}function C(o,r,n,i,f,l){var a,p="height"===o,u=p?"Height":"Width",h="inner"+u,s="client"+u,d="scroll"+u;if(r.self===t.self)a=i?t[h]:R[s];else if(r===B)if(i){var c=t[h]-R[s];a=S(R[d]+c,A[d]+c,t[h])}else a=S(R[d],A[d],R[s]);else{var g,m,v=p?"top":"left",w=p?"bottom":"right";if(a=(N||r.getBoundingClientRect())[o],i||(r===R?a-=t[h]-R[s]:(g=b(r,"border-"+v+"-width"),m=b(r,"border-"+w+"-width"),a-=Math.round(a)-r[s]-g-m)),n||(a-=b(r,"padding-"+v),a-=b(r,"padding-"+w)),f||(a-=g!==e?g:b(r,"border-"+v+"-width"),a-=m!==e?m:b(r,"border-"+w+"-width")),l){var y=b(r,"margin-"+v),x=b(r,"margin-"+w);a+=y>0?y:0,a+=x>0?x:0}}return a}function O(t){return t?u(t)?t:(t=[].concat(t),i(t[0],t[1])):null}function E(t,e){e=e||"border";var o=m(t,"position"),r="static"===o||"relative"===o?n(t,e):n(f(t)||B,"padding");if("static"===o)return r;if("relative"===o){var i=m(t,"left"),l=m(t,"right"),a=m(t,"top"),p=m(t,"bottom");return"auto"===i&&"auto"===l||(r.left-="auto"===i?-c(l):c(i)),"auto"===a&&"auto"===p||(r.top-="auto"===a?-c(p):c(a)),r}e=Y[e];var u=b(t,"margin-left"),h=b(t,"margin-top");return 5===e&&(r.left-=P(X(u,0)),r.top-=P(X(h,0))),e<5&&(r.left+=u,r.top+=h),e<4&&(r.left+=b(t,"border-left-width"),r.top+=b(t,"border-top-width")),1===e&&(r.left+=b(t,"padding-left"),r.top+=b(t,"padding-top")),r}function M(t,e){e=g(e?[z.placeDefaultOptions,e]:[z.placeDefaultOptions]);for(var o,r,n=0;n<7;n++)o=k[n],r=e[o],"function"==typeof r&&(r=e[o]=r()),n<2&&(r="string"==typeof r?r.split(" "):r,r[0]=r[0].charAt(0),r[1]=r[1].charAt(0),e[o]=r);return"string"==typeof e.collision&&(r=e.collision.split(" "),r[1]=r[1]||r[0],e.collision={left:r[0],right:r[0],top:r[1],bottom:r[1]}),e}function T(t,e,o,r,n,i){var f=o+i-n;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-r/2:"cr"===t||"cb"===t?f+e-r/2:"rl"===t||"bt"===t?f-r:"rc"===t||"bc"===t?f-r+e/2:"rr"===t||"bb"===t?f-r+e:f+e/2-r/2}function j(t,e,o){var r=0,n="push",i="forcePush",f=o?"top":"left",l=o?"bottom":"right",a=t[f],p=t[l],u=e[f],h=e[l],s=u+h;return a!==n&&a!==i||p!==n&&p!==i||!(u<0||h<0)?(a===i||a===n)&&u<0?r-=u:(p===i||p===n)&&h<0&&(r+=h):(u<h&&(r-=s<0?u+P(s/2):u),h<u&&(r+=s<0?h+P(s/2):h),u+=r,h-=r,a===i&&p!=i&&u<0&&(r-=u),p===i&&a!=i&&h<0&&(r+=h)),r}var t=t.document&&t.self===t.document.defaultView?t:window,B=t.document,R=B.documentElement,A=B.body;if(!A)throw Error("Mezr needs access to body element.");var N,P=Math.abs,S=Math.max,X=Math.min,Y={content:1,padding:2,scroll:3,border:4,margin:5},k=["my","at","of","within","collision","offsetX","offsetY"],z={};return z.placeDefaultOptions={my:"left top",at:"left top",of:t,offsetX:0,offsetY:0,within:null,collision:{left:"push",right:"push",top:"push",bottom:"push"}},z.transform=h(),z.hasTELCS=s(),{width:o,height:r,offset:n,rect:i,offsetParent:f,distance:l,intersection:a,place:p,_settings:z}});