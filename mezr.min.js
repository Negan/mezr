/*!
 * mezr v1.0.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function o(t,e){return e=e&&D[e]||4,O("width",t,e>1,e>2,e>3,e>4)}function n(t,e){return e=e&&D[e]||4,O("height",t,e>1,e>2,e>3,e>4)}function r(t,e){if(Array.isArray(t)||e&&"string"!=typeof e){var o=[].concat(t),n=[].concat(e),r=c(t)?t:k(o[0],o[1]),i=c(e)?e:k(n[0],n[1]);return{left:r.left-i.left,top:r.top-i.top}}return k(t,e)}function i(t,e){if(Array.isArray(t)||e&&"string"!=typeof e){var o=[].concat(t),n=[].concat(e),r=c(t)?t:j(o[0],o[1]),i=c(e)?e:k(n[0],n[1]);return r.left=r.left-i.left,r.top=r.top-i.top,r}return j(t,e)}function f(t,e){var o,n,r,i,f;if(t===N)return null;if(t===B)return N;var l=e||g(t,"position");if("relative"===l)return t;if("fixed"===l||"absolute"===l){if("fixed"===l&&S.transformLeaksFixed)return B;if(o=t===T?N:t.parentElement||null,"fixed"===l){for(;o&&o!==N&&!h(o);)o=o.parentElement||N;return o===N?B:o}for(;o&&o!==N&&"static"===g(o,"position")&&!h(o);)o=o.parentElement||N;return o}if("sticky"===l||"-webkit-sticky"===l){for(n=["overflow","overflow-y","overflow-x"],r=t.parentNode,t=null;!t&&r&&r!==N;){for(f=0;f<3;f++)if("auto"===(i=g(r,n[f]))||"scroll"===i){t=r;break}t||(r=r.parentNode)}return t||B}return null}function l(t,e){var o=C(t),n=C(e);return w(o,n)?-1:x(o,n)}function a(){var t=w(arguments[0],arguments[1]);if(arguments.length>2)for(var e=2;e<arguments.length&&(t=w(t,arguments[e]));++e);return t}function p(t,e){var o=v(t,e);return{left:-o.left,right:-o.right,top:-o.top,bottom:-o.bottom}}function u(t,e,o){var n,r,i,f={},l=C(t,!0),a=C(e),p=d([S.placementDefaultOptions,o||{}]),u="string"==typeof p.position?p.position.split(" "):p.position,h=c(p.contain),g=h&&p.contain.within,m=h&&R(p.contain.onOverflow),b=0,w=0,y=p.offsetX,x=p.offsetY;return y="string"==typeof y&&y.indexOf("%")>-1?s(y)/100*l.width:s(y),x="string"==typeof x&&x.indexOf("%")>-1?s(x)/100*l.height:s(x),f.left=A(u[0],u[2],a.width,a.left,l.width,l.left,y),f.top=A(u[1],u[3],a.height,a.top,l.height,l.top,x),l.left+=f.left,l.top+=f.top,g&&m&&(n=C(g),r=v(l,n),(r.left<0||r.right<0)&&(b=E(m,r),f.left+=b),(r.top<0||r.bottom<0)&&(w=E(m,r,1),f.top+=w)),"function"==typeof p.adjust&&(0!==b&&(l.left+=b,l.right=l.left+l.width),0!==w&&(l.top+=w,l.bottom=l.left+l.width),n=g?n||C(g):null,i=c(t)?t:k.apply(null,[].concat(t)),r=n?v(l,n):null,p.adjust(f,{elementRect:l,targetRect:a,containerRect:n,shift:{left:l.left-i.left,top:l.top-i.top},overflow:r?{left:-r.left,right:-r.right,top:-r.top,bottom:-r.bottom}:null,overflowCorrection:{left:b,top:w}})),f}function c(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function h(t){var e=g(t,S.transform.styleName),o=g(t,"display");return"none"!==e&&"inline"!==o&&"none"!==o}function s(t){return parseFloat(t)||0}function d(t){for(var e,o,n={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(o=t[r][e],n[e]=c(o)?d([o]):Array.isArray(o)?o.slice():o);return n}function g(t,e){return B.getComputedStyle(t,null).getPropertyValue(e)}function m(t,e){return s(g(t,e))}function b(t,e){Object.keys(e).forEach(function(o){t.style[o]=e[o]})}function v(t,e){var o=C(t),n=C(e);return{left:o.left-n.left,right:n.left+n.width-(o.left+o.width),top:o.top-n.top,bottom:n.top+n.height-(o.top+o.height)}}function w(t,e){var o={},n=C(t),r=C(e),i=v(n,r),f=L(n.width+Y(i.left,0)+Y(i.right,0),0),l=L(n.height+Y(i.top,0)+Y(i.bottom,0),0),a=f>0&&l>0;return a&&(o.width=f,o.height=l,o.left=n.left+F(Y(i.left,0)),o.top=n.top+F(Y(i.top,0)),o.right=o.left+o.width,o.bottom=o.top+o.height),a?o:null}function y(t,e,o,n){return Math.sqrt(Math.pow(o-t,2)+Math.pow(n-e,2))}function x(t,e){var o=t.left,n=o+t.width,r=t.top,i=r+t.height,f=e.left,l=f+e.width,a=e.top,p=a+e.height;return(f>n||l<o)&&(a>i||p<r)?f>n?p<r?y(n,r,f,p):y(n,i,f,a):p<r?y(o,r,l,p):y(o,i,l,a):p<r?r-p:f>n?f-n:a>i?a-i:o-l}function O(t,o,n,r,i,f){var l,a,p,u,c,h,s,d="height"===t,b=d?"Height":"Width",v="inner"+b,w="client"+b,y="scroll"+b,x=0;return o.self===B.self?l=r?B[v]:T[w]:o===N?r?(x=B[v]-T[w],l=L(T[y]+x,X[y]+x,B[v])):l=L(T[y],X[y],T[w]):(a=d?"top":"left",p=d?"bottom":"right",l=(z||o.getBoundingClientRect())[t],r||(o===T?x=B[v]-T[w]:P.indexOf(g(o,"display"))<0&&(u=m(o,"border-"+a+"-width"),c=m(o,"border-"+p+"-width"),x=Math.round(l)-(o[w]+u+c)),l-=x>0?x:0),n||(l-=m(o,"padding-"+a),l-=m(o,"padding-"+p)),i||(l-=u!==e?u:m(o,"border-"+a+"-width"),l-=c!==e?c:m(o,"border-"+p+"-width")),f&&(h=m(o,"margin-"+a),s=m(o,"margin-"+p),l+=h>0?h:0,l+=s>0?s:0)),l>0?l:0}function k(t,e){var o={left:0,top:0};if(t===N)return o;if(o.left=B.pageXOffset||0,o.top=B.pageYOffset||0,t.self===B.self)return o;var n=z||t.getBoundingClientRect();if(o.left+=n.left,o.top+=n.top,5===(e=e&&D[e]||4)){var r=m(t,"margin-left"),i=m(t,"margin-top");o.left-=r>0?r:0,o.top-=i>0?i:0}return e<4&&(o.left+=m(t,"border-left-width"),o.top+=m(t,"border-top-width")),1===e&&(o.left+=m(t,"padding-left"),o.top+=m(t,"padding-top")),o}function C(t,e){return t?c(t)?t:(t=[].concat(t),j(t[0],t[1],e)):null}function j(t,e,r){var i,f=t!==N&&t.self!==B.self;return e=e||"border",r&&(i=M(t,e)),f&&(z=t.getBoundingClientRect()),r||(i=k(t,e)),i.width=o(t,e),i.height=n(t,e),i.bottom=i.top+i.height,i.right=i.left+i.width,f&&(z=null),i}function M(t,e){if(e=e||"border",t===B||t===N)return k(t,e);var o=g(t,"position"),n="absolute"===o||"fixed"===o?k(f(t)||N,"padding"):k(t,e);if("relative"===o){var r=g(t,"left"),i=g(t,"right"),l=g(t,"top"),a=g(t,"bottom");"auto"===r&&"auto"===i||(n.left-="auto"===r?-s(i):s(r)),"auto"===l&&"auto"===a||(n.top-="auto"===l?-s(a):s(l))}else if("absolute"===o||"fixed"===o){e=D[e];var p=m(t,"margin-left"),u=m(t,"margin-top");5===e&&(n.left-=F(Y(p,0)),n.top-=F(Y(u,0))),e<5&&(n.left+=p,n.top+=u),e<4&&(n.left+=m(t,"border-left-width"),n.top+=m(t,"border-top-width")),1===e&&(n.left+=m(t,"padding-left"),n.top+=m(t,"padding-top"))}return n}function A(t,e,o,n,r,i,f){var l=t.charAt(0)+e.charAt(0),a=n+f-i;return"ll"===l||"tt"===l?a:"lc"===l||"tc"===l?a+o/2:"lr"===l||"tb"===l?a+o:"cl"===l||"ct"===l?a-r/2:"cr"===l||"cb"===l?a+o-r/2:"rl"===l||"bt"===l?a-r:"rc"===l||"bc"===l?a-r+o/2:"rr"===l||"bb"===l?a-r+o:a+o/2-r/2}function E(t,e,o){var n=0,r=o?"top":"left",i=o?"bottom":"right",f=t[r],l=t[i],a=e[r],p=e[i],u=a+p;return"push"!==f&&"forcepush"!==f||"push"!==l&&"forcepush"!==l||!(a<0||p<0)?("forcepush"===f||"push"===f)&&a<0?n-=a:("forcepush"===l||"push"===l)&&p<0&&(n+=p):(a<p&&(n-=u<0?a+F(u/2):a),p<a&&(n+=u<0?p+F(u/2):p),a+=n,p-=n,"forcepush"===f&&"forcepush"!==l&&a<0&&(n-=a),"forcepush"===l&&"forcepush"!==f&&p<0&&(n+=p)),n}function R(t){var e=typeof t,o="none",n="none",r="none",i="none";return"string"===e?o=n=r=i=t:"object"===e&&(o=t.left||t.x||o,n=t.right||t.x||n,r=t.top||t.y||r,i=t.bottom||t.y||i),"none"!==o||"none"!==n||"none"!==r||"none"!==i?{left:o,right:n,top:r,bottom:i}:null}var B=t.document&&t.self===t.document.defaultView?t:window,N=B.document,T=N.documentElement,X=N.body;if(!X)throw Error("Mezr needs access to body element.");var z,F=Math.abs,L=Math.max,Y=Math.min,D={content:1,padding:2,scroll:3,border:4,margin:5},P=["inline","table-column","table-column-group"],S={};return S.placementDefaultOptions={position:"left top left top",offsetX:0,offsetY:0,contain:null,adjust:null},S.transform=function(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],o=0;o<t.length;o++)if(T.style[t[o]]!==e){var n=t[o],r=n.toLowerCase().split("transform")[0];return{prefix:r,propName:n,styleName:r?"-"+r+"-transform":n}}return null}(),S.transformLeaksFixed=function(){if(!S.transform)return!0;var t,e,o=N.createElement("div"),n=N.createElement("div");return b(o,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),b(n,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),o.appendChild(n),X.appendChild(o),t=n.getBoundingClientRect().left,o.style[S.transform.propName]="translateX(0)",e=n.getBoundingClientRect().left,X.removeChild(o),e===t}(),{width:o,height:n,offset:r,rect:i,containingBlock:f,distance:l,intersection:a,overflow:p,placement:u,_settings:S}});