/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function n(t,e){return e=e&&T[e]||4,C("width",t,e>1,e>2,e>3,e>4)}function i(t,e){return e=e&&T[e]||4,C("height",t,e>1,e>2,e>3,e>4)}function o(e,n){var i={left:0,top:0};if(e===P)return i;if(i.left=t.pageXOffset||0,i.top=t.pageYOffset||0,e.self===t.self)return i;var o=B||e.getBoundingClientRect();if(i.left+=o.left,i.top+=o.top,n=n&&T[n]||4,5===n){var r=m(e,"margin-left"),f=m(e,"margin-top");i.left-=r>0?r:0,i.top-=f>0?f:0}return n<4&&(i.left+=m(e,"border-left-width"),i.top+=m(e,"border-top-width")),1===n&&(i.left+=m(e,"padding-left"),i.top+=m(e,"padding-top")),i}function r(t,e){return M(t,e)}function f(e,n){if(e===P)return null;if(e===t)return P;var i=n||g(e,"position");if("relative"===i)return e;if("fixed"!==i&&"absolute"!==i)return null;if("fixed"===i&&X.transformLeaksFixed)return t;var o=e===E?P:e.parentElement||null;if("fixed"===i){for(;o&&o!==P&&!h(o);)o=o.parentElement||P;return o===P?t:o}for(;o&&o!==P&&"static"===g(o,"position")&&!h(o);)o=o.parentElement||P;return o}function l(t,e){var n=O(t),i=O(e);return v(n,i)?-1:x(n,i)}function a(){var t=v(arguments[0],arguments[1]);if(arguments.length>2)for(var e=2;e<arguments.length&&(t=v(t,arguments[e]),t);++e);return t}function u(t){var e={},n=getPlaceOptions(t),i=O(n.element,!0),o=O(n.target),r=n.offsetX,f=n.offsetY;if(r="string"==typeof r&&r.indexOf("%")>-1?c(r)/100*i.width:c(r),f="string"==typeof f&&f.indexOf("%")>-1?c(f)/100*i.height:c(f),e.left=getPlacePosition(n.position[0]+n.position[2],o.width,o.left,i.width,i.left,r),e.top=getPlacePosition(n.position[1]+n.position[3],o.height,o.top,i.height,i.top,f),n.contain){i.left+=e.left,i.top+=e.top;var l=b(i,n.contain.within);e.left+=getPlaceCollision(n.contain.onCollision,l),e.top+=getPlaceCollision(n.contain.onCollision,l,1)}return e}function p(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function d(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++)if(E.style[t[n]]!==e){var i=t[n],o=i.toLowerCase().split("transform")[0];return{prefix:o,propName:i,styleName:o?"-"+o+"-transform":i}}return null}function s(){if(!X.transform)return!0;var t,e,n=P.createElement("div"),i=P.createElement("div");return w(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),w(i,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(i),k.appendChild(n),t=i.getBoundingClientRect().left,n.style[X.transform.propName]="translateX(0)",e=i.getBoundingClientRect().left,k.removeChild(n),e===t}function h(t){var e=g(t,X.transform.styleName),n=g(t,"display");return"none"!==e&&"inline"!==n&&"none"!==n}function c(t){return parseFloat(t)||0}function g(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}function m(t,e){return c(g(t,e))}function w(t,e){for(var n in e)t.style[n]=e[n]}function b(t,e){return t=O(t),e=O(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function v(t,e){var n={},i=O(t),o=O(e),r=b(i,o),f=R(i.width+N(r.left,0)+N(r.right,0),0),l=R(i.height+N(r.top,0)+N(r.bottom,0),0),a=f>0&&l>0;return a&&(n.width=f,n.height=l,n.left=i.left+j(N(r.left,0)),n.top=i.top+j(N(r.top,0)),n.right=n.left+n.width,n.bottom=n.top+n.height),a?n:null}function y(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}function x(t,e){var n=0,i=t.left,o=i+e.width,r=t.top,f=r+e.height,l=e.left,a=l+e.width,u=e.top,p=u+e.height;return n=(l>o||a<i)&&(u>f||p<r)?l>o?p<r?y(o,r,l,p):y(o,f,l,u):p<r?y(i,r,a,p):y(i,f,a,u):p<r?r-p:l>o?l-o:u>f?u-f:i-a}function C(n,i,o,r,f,l){var a,u,p,d,s,h,c,g,w="height"===n,b=w?"Height":"Width",v="inner"+b,y="client"+b,x="scroll"+b;return i.self===t.self?a=r?t[v]:E[y]:i===P?r?(g=t[v]-E[y],a=R(E[x]+g,k[x]+g,t[v])):a=R(E[x],k[x],E[y]):(u=w?"top":"left",p=w?"bottom":"right",a=(B||i.getBoundingClientRect())[n],r||(i===E?g=t[v]-E[y]:(d=m(i,"border-"+u+"-width"),s=m(i,"border-"+p+"-width"),g=Math.round(a)-(i[y]+d+s)),a-=g>0?g:0),o||(a-=m(i,"padding-"+u),a-=m(i,"padding-"+p)),f||(a-=d!==e?d:m(i,"border-"+u+"-width"),a-=s!==e?s:m(i,"border-"+p+"-width")),l&&(h=m(i,"margin-"+u),c=m(i,"margin-"+p),a+=h>0?h:0,a+=c>0?c:0)),a}function O(t,e){return t?p(t)?t:(t=[].concat(t),M(t[0],t[1],e)):null}function M(e,r,f){var l,a=e!==P&&e.self!==t.self;return r=r||"border",f&&(l=getStaticOffset(e,r)),a&&(B=e.getBoundingClientRect()),f||(l=o(e,r)),l.width=n(e,r),l.height=i(e,r),l.bottom=l.top+l.height,l.right=l.left+l.width,a&&(B=null),l}var t=t.document&&t.self===t.document.defaultView?t:window,P=t.document,E=P.documentElement,k=P.body;if(!k)throw Error("Mezr needs access to body element.");var B,j=Math.abs,R=Math.max,N=Math.min,T={content:1,padding:2,scroll:3,border:4,margin:5},X={};return X.placeDefaultOptions={element:null,target:null,position:"left top left top",offsetX:0,offsetY:0,contain:null},X.transform=d(),X.transformLeaksFixed=s(),{width:n,height:i,offset:o,rect:r,containingBlock:f,distance:l,intersection:a,place:u,_settings:X}});