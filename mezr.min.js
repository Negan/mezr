/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function n(t,e){return e=e&&L[e]||4,O("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&L[e]||4,O("height",t,e>1,e>2,e>3,e>4)}function r(e,n){var o={left:0,top:0};if(e===R)return o;if(o.left=t.pageXOffset||0,o.top=t.pageYOffset||0,e.self===t.self)return o;var r=z||e.getBoundingClientRect();if(o.left+=r.left,o.top+=r.top,n=n&&L[n]||4,5===n){var i=v(e,"margin-left"),f=v(e,"margin-top");o.left-=i>0?i:0,o.top-=f>0?f:0}return n<4&&(o.left+=v(e,"border-left-width"),o.top+=v(e,"border-top-width")),1===n&&(o.left+=v(e,"padding-left"),o.top+=v(e,"padding-top")),o}function i(e,i){var f=e!==R&&e.self!==t.self;i=i||"border",f&&(z=e.getBoundingClientRect());var l=r(e,i);return l.width=n(e,i),l.height=o(e,i),l.bottom=l.top+l.height,l.right=l.left+l.width,f&&(z=null),l}function f(e,n){if(e===R)return null;if(e===t)return R;var o=n||b(e,"position");if("relative"===o)return e;if("fixed"!==o&&"absolute"!==o)return null;if("fixed"===o&&X.transformLeaksFixed)return t;var r=e===N?R:e.parentElement||null;if("fixed"===o){for(;r&&r!==R&&!h(r);)r=r.parentElement||R;return r===R?t:r}for(;r&&r!==R&&"static"===b(r,"position")&&!h(r);)r=r.parentElement||R;return r}function l(t,e){var n=M(t),o=M(e);return a(n,o)?-1:C(n,o)}function a(t,e){var n=M(t),o=M(e),r=y(n,o),i=D(n.width+F(r.left,0)+F(r.right,0),0),f=D(n.height+F(r.top,0)+F(r.bottom,0),0),l=i>0&&f>0;return l?{width:i,height:f,left:n.left+A(F(r.left,0)),top:n.top+A(F(r.top,0))}:null}function p(){var t=a(arguments[0],arguments[1]);if(arguments.length>2)for(var e=2;e<arguments.length&&(t=a(t,arguments[e]),t);++e);return t}function u(t){t=E(t);var e={},r=[].concat(t.element),i=j(r[0],r[1]),f=M(t.target),l=t.offsetX,a=t.offsetY;if(i.width=n(r[0],r[1]),i.height=o(r[0],r[1]),l="string"==typeof l&&l.indexOf("%")>-1?g(l)/100*i.width:g(l),a="string"==typeof a&&a.indexOf("%")>-1?g(a)/100*i.height:g(a),e.left=k(t.position[0]+t.position[2],f.width,f.left,i.width,i.left,l),e.top=k(t.position[1]+t.position[3],f.height,f.top,i.height,i.top,a),t.contain){i.left+=e.left,i.top+=e.top;var p=y(i,t.contain.within);e.left+=B(t.contain.onCollision,p),e.top+=B(t.contain.onCollision,p,1)}return e}function c(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function d(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++)if(N.style[t[n]]!==e){var o=t[n],r=o.toLowerCase().split("transform")[0];return{prefix:r,propName:o,styleName:r?"-"+r+"-transform":o}}return null}function s(){if(!X.transform)return!0;var t,e,n=R.createElement("div"),o=R.createElement("div");return w(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),w(o,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(o),T.appendChild(n),t=o.getBoundingClientRect().left,n.style[X.transform.propName]="translateZ(0)",e=o.getBoundingClientRect().left,T.removeChild(n),e===t}function h(t){var e=b(t,X.transform.styleName),n=b(t,"display");return"none"!==e&&"inline"!==n&&"none"!==n}function g(t){return parseFloat(t)||0}function m(t){for(var e,n,o={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(n=t[r][e],o[e]=c(n)?m([n]):Array.isArray(n)?n.slice():n);return o}function b(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}function v(t,e){return g(b(t,e))}function w(t,e){for(var n in e)t.style[n]=e[n]}function y(t,e){return t=M(t),e=M(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function x(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))}function C(t,e){var n=0,o=t.left,r=o+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return n=(l>r||a<o)&&(p>f||u<i)?l>r?u<i?x(r,i,l,u):x(r,f,l,p):u<i?x(o,i,a,u):x(o,f,a,p):u<i?i-u:l>r?l-r:p>f?p-f:o-a}function O(n,o,r,i,f,l){var a,p,u,c,d,s,h,g,m="height"===n,b=m?"Height":"Width",w="inner"+b,y="client"+b,x="scroll"+b;return o.self===t.self?a=i?t[w]:N[y]:o===R?i?(g=t[w]-N[y],a=D(N[x]+g,T[x]+g,t[w])):a=D(N[x],T[x],N[y]):(p=m?"top":"left",u=m?"bottom":"right",a=(z||o.getBoundingClientRect())[n],i||(o===N?g=t[w]-N[y]:(c=v(o,"border-"+p+"-width"),d=v(o,"border-"+u+"-width"),g=Math.round(a)-(o[y]+c+d)),a-=g>0?g:0),r||(a-=v(o,"padding-"+p),a-=v(o,"padding-"+u)),f||(a-=c!==e?c:v(o,"border-"+p+"-width"),a-=d!==e?d:v(o,"border-"+u+"-width")),l&&(s=v(o,"margin-"+p),h=v(o,"margin-"+u),a+=s>0?s:0,a+=h>0?h:0)),a}function M(t){return t?c(t)?t:(t=[].concat(t),i(t[0],t[1])):null}function j(t,e){e=e||"border";var n=b(t,"position"),o="static"===n||"relative"===n?r(t,e):r(f(t)||R,"padding");if("static"===n)return o;if("relative"===n){var i=b(t,"left"),l=b(t,"right"),a=b(t,"top"),p=b(t,"bottom");return"auto"===i&&"auto"===l||(o.left-="auto"===i?-g(l):g(i)),"auto"===a&&"auto"===p||(o.top-="auto"===a?-g(p):g(a)),o}e=L[e];var u=v(t,"margin-left"),c=v(t,"margin-top");return 5===e&&(o.left-=A(F(u,0)),o.top-=A(F(c,0))),e<5&&(o.left+=u,o.top+=c),e<4&&(o.left+=v(t,"border-left-width"),o.top+=v(t,"border-top-width")),1===e&&(o.left+=v(t,"padding-left"),o.top+=v(t,"padding-top")),o}function E(t){var e=m(t?[X.placeDefaultOptions,t]:[X.placeDefaultOptions]),n=e.position;e.position=n="string"==typeof n?n.split(" "):n;for(var o=0;o<n.length;o++)n[o]=n[o].charAt(0);var r=e.contain;if(r&&"object"==typeof r&&r.within&&"object"==typeof r.within){var i=r.onCollision,f=typeof i,l="none",a="none",p="none",u="none";"string"===f?l=a=p=u=i:"object"===f&&(l=i.left||i.x||l,a=i.right||i.x||a,p=i.top||i.y||p,u=i.bottom||i.y||u),"none"!==l||"none"!==a||"none"!==p||"none"!==u?e.contain.onCollision={left:l,right:a,top:p,bottom:u}:e.contain=null}else e.contain=null;return e}function k(t,e,n,o,r,i){var f=n+i-r;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-o/2:"cr"===t||"cb"===t?f+e-o/2:"rl"===t||"bt"===t?f-o:"rc"===t||"bc"===t?f-o+e/2:"rr"===t||"bb"===t?f-o+e:f+e/2-o/2}function B(t,e,n){var o=0,r="push",i="forcepush",f=n?"top":"left",l=n?"bottom":"right",a=t[f],p=t[l],u=e[f],c=e[l],d=u+c;return a!==r&&a!==i||p!==r&&p!==i||!(u<0||c<0)?(a===i||a===r)&&u<0?o-=u:(p===i||p===r)&&c<0&&(o+=c):(u<c&&(o-=d<0?u+A(d/2):u),c<u&&(o+=d<0?c+A(d/2):c),u+=o,c-=o,a===i&&p!=i&&u<0&&(o-=u),p===i&&a!=i&&c<0&&(o+=c)),o}var t=t.document&&t.self===t.document.defaultView?t:window,R=t.document,N=R.documentElement,T=R.body;if(!T)throw Error("Mezr needs access to body element.");var z,A=Math.abs,D=Math.max,F=Math.min,L={content:1,padding:2,scroll:3,border:4,margin:5},X={};return X.placeDefaultOptions={element:null,target:null,position:"left top left top",offsetX:0,offsetY:0,contain:null},X.transform=d(),X.transformLeaksFixed=s(),{width:n,height:o,offset:r,rect:i,containingBlock:f,distance:l,intersection:p,place:u,_settings:X}});