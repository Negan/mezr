/*!
 * mezr v0.5.0-dev
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function n(t,e){return e=e&&L[e]||4,O("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&L[e]||4,O("height",t,e>1,e>2,e>3,e>4)}function r(e,n){var o={left:0,top:0};if(e===N)return o;if(o.left=t.pageXOffset||0,o.top=t.pageYOffset||0,e.self===t.self)return o;var r=z||e.getBoundingClientRect();if(o.left+=r.left,o.top+=r.top,n=n&&L[n]||4,5===n){var i=b(e,"margin-left"),f=b(e,"margin-top");o.left-=i>0?i:0,o.top-=f>0?f:0}return n<4&&(o.left+=b(e,"border-left-width"),o.top+=b(e,"border-top-width")),1===n&&(o.left+=b(e,"padding-left"),o.top+=b(e,"padding-top")),o}function i(t,e){return j(t,e)}function f(e,n){if(e===N)return null;if(e===t)return N;var o=n||m(e,"position");if("relative"===o)return e;if("fixed"!==o&&"absolute"!==o)return null;if("fixed"===o&&Y.transformLeaksFixed)return t;var r=e===T?N:e.parentElement||null;if("fixed"===o){for(;r&&r!==N&&!h(r);)r=r.parentElement||N;return r===N?t:r}for(;r&&r!==N&&"static"===m(r,"position")&&!h(r);)r=r.parentElement||N;return r}function l(t,e){var n=M(t),o=M(e);return y(n,o)?-1:C(n,o)}function a(){var t=y(arguments[0],arguments[1]);if(arguments.length>2)for(var e=2;e<arguments.length&&(t=y(t,arguments[e]),t);++e);return t}function p(t){var e={},n=k(t),o=M(n.element,!0),r=M(n.target),i=n.offsetX,f=n.offsetY;if(i="string"==typeof i&&i.indexOf("%")>-1?s(i)/100*o.width:s(i),f="string"==typeof f&&f.indexOf("%")>-1?s(f)/100*o.height:s(f),e.left=B(n.position[0]+n.position[2],r.width,r.left,o.width,o.left,i),e.top=B(n.position[1]+n.position[3],r.height,r.top,o.height,o.top,f),n.contain){o.left+=e.left,o.top+=e.top;var l=w(o,n.contain.within);e.left+=R(n.contain.onCollision,l),e.top+=R(n.contain.onCollision,l,1)}return e}function u(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function d(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++)if(T.style[t[n]]!==e){var o=t[n],r=o.toLowerCase().split("transform")[0];return{prefix:r,propName:o,styleName:r?"-"+r+"-transform":o}}return null}function c(){if(!Y.transform)return!0;var t,e,n=N.createElement("div"),o=N.createElement("div");return v(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),v(o,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(o),X.appendChild(n),t=o.getBoundingClientRect().left,n.style[Y.transform.propName]="translateX(0)",e=o.getBoundingClientRect().left,X.removeChild(n),e===t}function h(t){var e=m(t,Y.transform.styleName),n=m(t,"display");return"none"!==e&&"inline"!==n&&"none"!==n}function s(t){return parseFloat(t)||0}function g(t){for(var e,n,o={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(n=t[r][e],o[e]=u(n)?g([n]):Array.isArray(n)?n.slice():n);return o}function m(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}function b(t,e){return s(m(t,e))}function v(t,e){for(var n in e)t.style[n]=e[n]}function w(t,e){return t=M(t),e=M(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function y(t,e){var n={},o=M(t),r=M(e),i=w(o,r),f=D(o.width+F(i.left,0)+F(i.right,0),0),l=D(o.height+F(i.top,0)+F(i.bottom,0),0),a=f>0&&l>0;return a&&(n.width=f,n.height=l,n.left=o.left+A(F(i.left,0)),n.top=o.top+A(F(i.top,0)),n.right=n.left+n.width,n.bottom=n.top+n.height),a?n:null}function x(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))}function C(t,e){var n=0,o=t.left,r=o+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return n=(l>r||a<o)&&(p>f||u<i)?l>r?u<i?x(r,i,l,u):x(r,f,l,p):u<i?x(o,i,a,u):x(o,f,a,p):u<i?i-u:l>r?l-r:p>f?p-f:o-a}function O(n,o,r,i,f,l){var a,p,u,d,c,h,s,g,m="height"===n,v=m?"Height":"Width",w="inner"+v,y="client"+v,x="scroll"+v;return o.self===t.self?a=i?t[w]:T[y]:o===N?i?(g=t[w]-T[y],a=D(T[x]+g,X[x]+g,t[w])):a=D(T[x],X[x],T[y]):(p=m?"top":"left",u=m?"bottom":"right",a=(z||o.getBoundingClientRect())[n],i||(o===T?g=t[w]-T[y]:(d=b(o,"border-"+p+"-width"),c=b(o,"border-"+u+"-width"),g=Math.round(a)-(o[y]+d+c)),a-=g>0?g:0),r||(a-=b(o,"padding-"+p),a-=b(o,"padding-"+u)),f||(a-=d!==e?d:b(o,"border-"+p+"-width"),a-=c!==e?c:b(o,"border-"+u+"-width")),l&&(h=b(o,"margin-"+p),s=b(o,"margin-"+u),a+=h>0?h:0,a+=s>0?s:0)),a}function M(t,e){return t?u(t)?t:(t=[].concat(t),j(t[0],t[1],e)):null}function j(e,i,f){var l,a=e!==N&&e.self!==t.self;return i=i||"border",f&&(l=E(e,i)),a&&(z=e.getBoundingClientRect()),f||(l=r(e,i)),l.width=n(e,i),l.height=o(e,i),l.bottom=l.top+l.height,l.right=l.left+l.width,a&&(z=null),l}function E(e,n){if(n=n||"border",e===t||e===N)return r(e,n);var o=m(e,"position"),i="static"===o||"relative"===o?r(e,n):r(f(e)||N,"padding");if("static"===o)return i;if("relative"===o){var l=m(e,"left"),a=m(e,"right"),p=m(e,"top"),u=m(e,"bottom");return"auto"===l&&"auto"===a||(i.left-="auto"===l?-s(a):s(l)),"auto"===p&&"auto"===u||(i.top-="auto"===p?-s(u):s(p)),i}n=L[n];var d=b(e,"margin-left"),c=b(e,"margin-top");return 5===n&&(i.left-=A(F(d,0)),i.top-=A(F(c,0))),n<5&&(i.left+=d,i.top+=c),n<4&&(i.left+=b(e,"border-left-width"),i.top+=b(e,"border-top-width")),1===n&&(i.left+=b(e,"padding-left"),i.top+=b(e,"padding-top")),i}function k(t){var e=g(t?[Y.placeDefaultOptions,t]:[Y.placeDefaultOptions]),n=e.position;e.position=n="string"==typeof n?n.split(" "):n;for(var o=0;o<n.length;o++)n[o]=n[o].charAt(0);var r=e.contain;if(r&&"object"==typeof r&&r.within&&"object"==typeof r.within){var i=r.onCollision,f=typeof i,l="none",a="none",p="none",u="none";"string"===f?l=a=p=u=i:"object"===f&&(l=i.left||i.x||l,a=i.right||i.x||a,p=i.top||i.y||p,u=i.bottom||i.y||u),"none"!==l||"none"!==a||"none"!==p||"none"!==u?e.contain.onCollision={left:l,right:a,top:p,bottom:u}:e.contain=null}else e.contain=null;return e}function B(t,e,n,o,r,i){var f=n+i-r;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-o/2:"cr"===t||"cb"===t?f+e-o/2:"rl"===t||"bt"===t?f-o:"rc"===t||"bc"===t?f-o+e/2:"rr"===t||"bb"===t?f-o+e:f+e/2-o/2}function R(t,e,n){var o=0,r="push",i="forcepush",f=n?"top":"left",l=n?"bottom":"right",a=t[f],p=t[l],u=e[f],d=e[l],c=u+d;return a!==r&&a!==i||p!==r&&p!==i||!(u<0||d<0)?(a===i||a===r)&&u<0?o-=u:(p===i||p===r)&&d<0&&(o+=d):(u<d&&(o-=c<0?u+A(c/2):u),d<u&&(o+=c<0?d+A(c/2):d),u+=o,d-=o,a===i&&p!=i&&u<0&&(o-=u),p===i&&a!=i&&d<0&&(o+=d)),o}var t=t.document&&t.self===t.document.defaultView?t:window,N=t.document,T=N.documentElement,X=N.body;if(!X)throw Error("Mezr needs access to body element.");var z,A=Math.abs,D=Math.max,F=Math.min,L={content:1,padding:2,scroll:3,border:4,margin:5},Y={};return Y.placeDefaultOptions={element:null,target:null,position:"left top left top",offsetX:0,offsetY:0,contain:null},Y.transform=d(),Y.transformLeaksFixed=c(),{width:n,height:o,offset:r,rect:i,containingBlock:f,distance:l,intersection:a,place:p,_settings:Y}});