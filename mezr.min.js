/*!
 * mezr v0.5.0
 * https://github.com/niklasramo/mezr
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.mezr=e(t)}(this,function(t,e){"use strict";function n(t,e){return e=e&&Y[e]||4,O("width",t,e>1,e>2,e>3,e>4)}function o(t,e){return e=e&&Y[e]||4,O("height",t,e>1,e>2,e>3,e>4)}function r(t,e){if(Array.isArray(t)||e&&"string"!=typeof e){var n=[].concat(t),o=[].concat(e),r=u(t)?t:M(n[0],n[1]),i=u(e)?e:M(o[0],o[1]);return{left:r.left-i.left,top:r.top-i.top}}return M(t,e)}function i(t,e){if(Array.isArray(t)||e&&"string"!=typeof e){var n=[].concat(t),o=[].concat(e),r=u(t)?t:A(n[0],n[1]),i=u(e)?e:M(o[0],o[1]);return r.left=r.left-i.left,r.top=r.top-i.top,r}return A(t,e)}function f(e,n){if(e===N)return null;if(e===t)return N;var o=n||m(e,"position");if("relative"===o)return e;if("fixed"!==o&&"absolute"!==o)return null;if("fixed"===o&&P.transformLeaksFixed)return t;var r=e===T?N:e.parentElement||null;if("fixed"===o){for(;r&&r!==N&&!d(r);)r=r.parentElement||N;return r===N?t:r}for(;r&&r!==N&&"static"===m(r,"position")&&!d(r);)r=r.parentElement||N;return r}function l(t,e){var n=j(t),o=j(e);return y(n,o)?-1:C(n,o)}function a(){var t=y(arguments[0],arguments[1]);if(arguments.length>2)for(var e=2;e<arguments.length&&(t=y(t,arguments[e]),t);++e);return t}function p(t){var e={},n=k(t),o=j(n.element,!0),r=j(n.target),i=n.offsetX,f=n.offsetY;if(i="string"==typeof i&&i.indexOf("%")>-1?h(i)/100*o.width:h(i),f="string"==typeof f&&f.indexOf("%")>-1?h(f)/100*o.height:h(f),e.left=B(n.position[0]+n.position[2],r.width,r.left,o.width,o.left,i),e.top=B(n.position[1]+n.position[3],r.height,r.top,o.height,o.top,f),n.contain){o.left+=e.left,o.top+=e.top;var l=w(o,n.contain.within);e.left+=R(n.contain.onCollision,l),e.top+=R(n.contain.onCollision,l,1)}return e}function u(t){return"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function c(){for(var t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++)if(T.style[t[n]]!==e){var o=t[n],r=o.toLowerCase().split("transform")[0];return{prefix:r,propName:o,styleName:r?"-"+r+"-transform":o}}return null}function s(){if(!P.transform)return!0;var t,e,n=N.createElement("div"),o=N.createElement("div");return v(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),v(o,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(o),X.appendChild(n),t=o.getBoundingClientRect().left,n.style[P.transform.propName]="translateX(0)",e=o.getBoundingClientRect().left,X.removeChild(n),e===t}function d(t){var e=m(t,P.transform.styleName),n=m(t,"display");return"none"!==e&&"inline"!==n&&"none"!==n}function h(t){return parseFloat(t)||0}function g(t){for(var e,n,o={},r=0,i=t.length;r<i;r++)for(e in t[r])t[r].hasOwnProperty(e)&&(n=t[r][e],o[e]=u(n)?g([n]):Array.isArray(n)?n.slice():n);return o}function m(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}function b(t,e){return h(m(t,e))}function v(t,e){for(var n in e)t.style[n]=e[n]}function w(t,e){return t=j(t),e=j(e),{left:t.left-e.left,right:e.left+e.width-(t.left+t.width),top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height)}}function y(t,e){var n={},o=j(t),r=j(e),i=w(o,r),f=F(o.width+L(i.left,0)+L(i.right,0),0),l=F(o.height+L(i.top,0)+L(i.bottom,0),0),a=f>0&&l>0;return a&&(n.width=f,n.height=l,n.left=o.left+D(L(i.left,0)),n.top=o.top+D(L(i.top,0)),n.right=n.left+n.width,n.bottom=n.top+n.height),a?n:null}function x(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))}function C(t,e){var n=0,o=t.left,r=o+e.width,i=t.top,f=i+e.height,l=e.left,a=l+e.width,p=e.top,u=p+e.height;return n=(l>r||a<o)&&(p>f||u<i)?l>r?u<i?x(r,i,l,u):x(r,f,l,p):u<i?x(o,i,a,u):x(o,f,a,p):u<i?i-u:l>r?l-r:p>f?p-f:o-a}function O(n,o,r,i,f,l){var a,p,u,c,s,d,h,g,m="height"===n,v=m?"Height":"Width",w="inner"+v,y="client"+v,x="scroll"+v;return o.self===t.self?a=i?t[w]:T[y]:o===N?i?(g=t[w]-T[y],a=F(T[x]+g,X[x]+g,t[w])):a=F(T[x],X[x],T[y]):(p=m?"top":"left",u=m?"bottom":"right",a=(z||o.getBoundingClientRect())[n],i||(o===T?g=t[w]-T[y]:(c=b(o,"border-"+p+"-width"),s=b(o,"border-"+u+"-width"),g=Math.round(a)-(o[y]+c+s)),a-=g>0?g:0),r||(a-=b(o,"padding-"+p),a-=b(o,"padding-"+u)),f||(a-=c!==e?c:b(o,"border-"+p+"-width"),a-=s!==e?s:b(o,"border-"+u+"-width")),l&&(d=b(o,"margin-"+p),h=b(o,"margin-"+u),a+=d>0?d:0,a+=h>0?h:0)),a}function M(e,n){var o={left:0,top:0};if(e===N)return o;if(o.left=t.pageXOffset||0,o.top=t.pageYOffset||0,e.self===t.self)return o;var r=z||e.getBoundingClientRect();if(o.left+=r.left,o.top+=r.top,n=n&&Y[n]||4,5===n){var i=b(e,"margin-left"),f=b(e,"margin-top");o.left-=i>0?i:0,o.top-=f>0?f:0}return n<4&&(o.left+=b(e,"border-left-width"),o.top+=b(e,"border-top-width")),1===n&&(o.left+=b(e,"padding-left"),o.top+=b(e,"padding-top")),o}function j(t,e){return t?u(t)?t:(t=[].concat(t),A(t[0],t[1],e)):null}function A(e,r,i){var f,l=e!==N&&e.self!==t.self;return r=r||"border",i&&(f=E(e,r)),l&&(z=e.getBoundingClientRect()),i||(f=M(e,r)),f.width=n(e,r),f.height=o(e,r),f.bottom=f.top+f.height,f.right=f.left+f.width,l&&(z=null),f}function E(e,n){if(n=n||"border",e===t||e===N)return M(e,n);var o=m(e,"position"),r="static"===o||"relative"===o?M(e,n):M(f(e)||N,"padding");if("static"===o)return r;if("relative"===o){var i=m(e,"left"),l=m(e,"right"),a=m(e,"top"),p=m(e,"bottom");return"auto"===i&&"auto"===l||(r.left-="auto"===i?-h(l):h(i)),"auto"===a&&"auto"===p||(r.top-="auto"===a?-h(p):h(a)),r}n=Y[n];var u=b(e,"margin-left"),c=b(e,"margin-top");return 5===n&&(r.left-=D(L(u,0)),r.top-=D(L(c,0))),n<5&&(r.left+=u,r.top+=c),n<4&&(r.left+=b(e,"border-left-width"),r.top+=b(e,"border-top-width")),1===n&&(r.left+=b(e,"padding-left"),r.top+=b(e,"padding-top")),r}function k(t){var e=g(t?[P.placeDefaultOptions,t]:[P.placeDefaultOptions]),n=e.contain;e.position="string"==typeof e.position?e.position.split(" "):e.position;for(var o=0;o<e.position.length;o++)e.position[o]=e.position[o].charAt(0);if(n&&"object"==typeof n&&n.within&&"object"==typeof n.within){var r=n.onCollision,i=typeof r,f="none",l="none",a="none",p="none";"string"===i?f=l=a=p=r:"object"===i&&(f=r.left||r.x||f,l=r.right||r.x||l,a=r.top||r.y||a,p=r.bottom||r.y||p),"none"!==f||"none"!==l||"none"!==a||"none"!==p?e.contain.onCollision={left:f,right:l,top:a,bottom:p}:e.contain=null}else e.contain=null;return e}function B(t,e,n,o,r,i){var f=n+i-r;return"ll"===t||"tt"===t?f:"lc"===t||"tc"===t?f+e/2:"lr"===t||"tb"===t?f+e:"cl"===t||"ct"===t?f-o/2:"cr"===t||"cb"===t?f+e-o/2:"rl"===t||"bt"===t?f-o:"rc"===t||"bc"===t?f-o+e/2:"rr"===t||"bb"===t?f-o+e:f+e/2-o/2}function R(t,e,n){var o=0,r="push",i="forcepush",f=n?"top":"left",l=n?"bottom":"right",a=t[f],p=t[l],u=e[f],c=e[l],s=u+c;return a!==r&&a!==i||p!==r&&p!==i||!(u<0||c<0)?(a===i||a===r)&&u<0?o-=u:(p===i||p===r)&&c<0&&(o+=c):(u<c&&(o-=s<0?u+D(s/2):u),c<u&&(o+=s<0?c+D(s/2):c),u+=o,c-=o,a===i&&p!=i&&u<0&&(o-=u),p===i&&a!=i&&c<0&&(o+=c)),o}var t=t.document&&t.self===t.document.defaultView?t:window,N=t.document,T=N.documentElement,X=N.body;if(!X)throw Error("Mezr needs access to body element.");var z,D=Math.abs,F=Math.max,L=Math.min,Y={content:1,padding:2,scroll:3,border:4,margin:5},P={};return P.placeDefaultOptions={element:null,target:null,position:"left top left top",offsetX:0,offsetY:0,contain:null},P.transform=c(),P.transformLeaksFixed=s(),{width:n,height:o,offset:r,rect:i,containingBlock:f,distance:l,intersection:a,place:p,_settings:P}});